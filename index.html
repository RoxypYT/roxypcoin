<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roxypcoin | Ecosistema de Inversi√≥n Profesional üöÄ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        body { background-color: #050505; color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .epic-modal { display: none; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); position: fixed; inset: 0; z-index: 100; align-items: center; justify-content: center; }
        .epic-card { background: #111; border: 1px solid #222; border-radius: 4px; width: 100%; max-width: 420px; padding: 40px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        .input-epic { background: #2a2a2a; border: 1px solid #333; padding: 14px; border-radius: 4px; width: 100%; color: white; outline: none; margin-bottom: 20px; transition: 0.3s; }
        .input-epic:focus { border-color: #007bff; background: #333; }
        .btn-blue { background: #007bff; color: white; font-weight: bold; padding: 14px; border-radius: 4px; width: 100%; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; }
        .btn-blue:hover { background: #0056b3; box-shadow: 0 0 20px rgba(0, 123, 255, 0.4); }
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 12px; transition: 0.3s; }
        .glass-card:hover { border-color: #007bff; background: rgba(255, 255, 255, 0.04); }
        .step-pill { background: #007bff; color: white; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="authModal" class="epic-modal">
        <div class="epic-card">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-black italic tracking-tighter">ROXYP<span class="text-blue-500 italic">COIN</span></h2>
                <p id="authSub" class="text-gray-500 text-[10px] mt-2 uppercase tracking-[3px]">Inicia sesi√≥n con tu cuenta</p>
            </div>
            
            <div class="space-y-1">
                <label class="text-[10px] font-bold text-gray-500 uppercase ml-1">Correo Electr√≥nico</label>
                <input type="email" id="authEmail" class="input-epic" placeholder="Email">
                
                <label class="text-[10px] font-bold text-gray-500 uppercase ml-1">Contrase√±a</label>
                <input type="password" id="authPass" class="input-epic" placeholder="Contrase√±a">
                
                <button onclick="ejecutarAuth()" id="authBtn" class="btn-blue">Iniciar Sesi√≥n</button>
                
                <p class="text-center text-xs text-gray-500 mt-8">
                    <span id="authSwitchText">¬øNo tienes cuenta de Roxyp?</span> 
                    <a href="javascript:void(0)" onclick="toggleAuthMode()" class="text-white underline font-bold ml-1" id="authLink">Reg√≠strate</a>
                </p>
                <button onclick="closeAuth()" class="text-[9px] text-gray-600 w-full mt-10 uppercase tracking-widest hover:text-white transition">Volver atr√°s</button>
            </div>
        </div>
    </div>

    <nav class="sticky top-0 z-50 bg-[#050505]/80 backdrop-blur-md border-b border-white/5 px-8 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-black tracking-tighter flex items-center gap-2">
                <span class="text-blue-600 italic">Ô£ø</span> ROXYPCOIN
            </div>
            <div id="user-nav" class="flex gap-8 items-center">
                <div class="hidden md:block text-right">
                    <p class="text-[10px] text-gray-500 uppercase font-bold">Saldo Disponible</p>
                    <p id="user-balance" class="text-sm font-black text-blue-500">0.00 RP</p>
                </div>
                <button id="mainAuthBtn" onclick="openAuth('login')" class="bg-white text-black px-8 py-2.5 rounded-sm font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition">Acceso Cliente</button>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto py-16 px-6">
        <div class="grid lg:grid-cols-3 gap-16">
            
            <div class="lg:col-span-2 space-y-20">
                <section class="animate__animated animate__fadeIn">
                    <h1 class="text-6xl font-black mb-6 italic tracking-tight">Activos en Fase 1.</h1>
                    <p class="text-gray-400 text-lg max-w-xl mb-12 leading-relaxed">Invierte en la primera etapa del ecosistema. Al agotarse el stock, el valor saltar√° autom√°ticamente a 2.00‚Ç¨.</p>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card p-10 relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-blue-600 px-4 py-1 text-[10px] font-black italic uppercase">Fase Actual</div>
                            <h3 class="text-gray-500 font-bold text-xs uppercase mb-4 tracking-widest">Paquete Est√°ndar</h3>
                            <div class="text-6xl font-black mb-8 italic">1.00‚Ç¨ <span class="text-sm font-normal text-gray-600 italic">/ RP</span></div>
                            <button onclick="comprar(1)" class="w-full btn-blue py-4 font-black">Comprar Ahora üí≥</button>
                        </div>
                        <div class="glass-card p-10 bg-white/[0.01] border-dashed">
                            <h3 class="text-gray-500 font-bold text-xs uppercase mb-4 tracking-widest">Siguiente Nivel</h3>
                            <div class="text-6xl font-black mb-8 text-zinc-800 italic">2.00‚Ç¨</div>
                            <div class="w-full bg-zinc-900 h-1.5 rounded-full overflow-hidden">
                                <div class="bg-zinc-700 h-full w-[0%]"></div>
                            </div>
                            <p class="text-[10px] text-zinc-700 mt-4 font-bold uppercase tracking-widest text-center italic">Esperando finalizaci√≥n de Fase 1</p>
                        </div>
                    </div>
                </section>

                <section id="guia-venta" class="animate__animated animate__fadeIn animate__delay-1s">
                    <div class="flex items-center gap-4 mb-10">
                        <h2 class="text-3xl font-black italic tracking-tighter">C√≥mo liquidar tu inversi√≥n</h2>
                        <div class="h-[1px] bg-white/10 flex-1"></div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-10">
                        <div class="flex gap-6">
                            <div class="step-pill">1</div>
                            <div>
                                <h4 class="font-bold text-white mb-2 uppercase text-sm italic">Generar Token</h4>
                                <p class="text-sm text-gray-500 leading-relaxed">Desde tu panel privado generas un c√≥digo √∫nico de traspaso.</p>
                            </div>
                        </div>
                        <div class="flex gap-6">
                            <div class="step-pill">2</div>
                            <div>
                                <h4 class="font-bold text-white mb-2 uppercase text-sm italic">Fijar Precio</h4>
                                <p class="text-sm text-gray-500 leading-relaxed">T√∫ decides a cu√°nto vendes tu c√≥digo al nuevo comprador.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <aside class="space-y-8 animate__animated animate__fadeInRight">
                <div class="glass-card p-8 border-blue-500/20 shadow-2xl shadow-blue-500/5">
                    <h3 class="text-gray-500 font-bold text-[10px] uppercase tracking-[2px] mb-6">Tu Portafolio Activo</h3>
                    <div class="text-6xl font-black italic mb-2 tracking-tighter" id="main-balance">0.00<span class="text-lg text-blue-600 ml-2 italic">RP</span></div>
                    <p class="text-[10px] text-zinc-500 uppercase tracking-widest font-bold">Reserva de valor protegida ‚úì</p>
                    <button onclick="alert('Funcionalidad de token en desarrollo para Fase 1')" class="w-full mt-8 border border-white/10 py-3 text-[10px] font-black uppercase tracking-widest hover:bg-white hover:text-black transition">Generar Token de Venta</button>
                </div>

                <div class="glass-card p-8">
                    <h3 class="text-white font-bold text-sm mb-6 italic underline decoration-blue-600 underline-offset-8">Muro de Holders üó£Ô∏è</h3>
                    <div id="muro-pro" class="space-y-6"></div>
                    <div class="mt-6">
                        <textarea id="msg" placeholder="Escribe tu opini√≥n..." class="w-full bg-white/5 border border-white/10 p-4 text-xs rounded-sm focus:outline-none focus:border-blue-600 h-24 mb-4 text-white"></textarea>
                        <button onclick="postear()" class="w-full bg-white text-black py-3 text-[10px] font-black uppercase tracking-widest">Publicar</button>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        // CONFIGURACI√ìN INTEGRADA CON TU ANON KEY
        const supabaseUrl = 'https://oubfxxogesvodrzknlqb.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91YmZ4eG9nZXN2b2RyemtubHFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMTk2NTMsImV4cCI6MjA4NjY5NTY1M30.qqNy8FEkRlwEbXqDpbG_AmUt0DWprU9fqFi5YAaG0O8';
        const _supabase = supabase.createClient(supabaseUrl, supabaseKey);

        let authMode = 'login';

        function openAuth(mode) {
            authMode = mode;
            document.getElementById('authModal').style.display = 'flex';
            document.getElementById('authBtn').innerText = (mode === 'login') ? 'Iniciar Sesi√≥n' : 'Crear Cuenta';
        }

        function closeAuth() {
            document.getElementById('authModal').style.display = 'none';
        }

        function toggleAuthMode() {
            authMode = (authMode === 'login') ? 'signup' : 'login';
            document.getElementById('authBtn').innerText = (authMode === 'login') ? 'Iniciar Sesi√≥n' : 'Crear Cuenta';
            document.getElementById('authLink').innerText = (authMode === 'login') ? 'Reg√≠strate' : 'Inicia Sesi√≥n';
            document.getElementById('authSwitchText').innerText = (authMode === 'login') ? '¬øNo tienes cuenta de Roxyp?' : '¬øYa tienes una cuenta?';
        }

        async function ejecutarAuth() {
            const email = document.getElementById('authEmail').value;
            const pass = document.getElementById('authPass').value;
            if(!email || !pass) return alert("Completa los campos.");

            if(authMode === 'signup') {
                const { error } = await _supabase.auth.signUp({ email, password: pass });
                if(error) alert(error.message); else alert("‚úÖ ¬°√âxito! Revisa tu email.");
            } else {
                const { error } = await _supabase.auth.signInWithPassword({ email, password: pass });
                if(error) alert("Datos incorrectos."); else { closeAuth(); checkUser(); }
            }
        }

        async function checkUser() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (user) {
                document.getElementById('mainAuthBtn').innerText = "Salir";
                document.getElementById('mainAuthBtn').onclick = () => _supabase.auth.signOut().then(() => location.reload());
                actualizarSaldo(user.id);
            }
        }

        async function actualizarSaldo(uid) {
            const { data } = await _supabase.from('perfiles').select('saldo_rp').eq('id', uid).single();
            if(data) {
                document.getElementById('main-balance').innerHTML = data.saldo_rp.toFixed(2) + '<span class="text-lg text-blue-600 ml-2 italic">RP</span>';
                document.getElementById('user-balance').innerText = data.saldo_rp.toFixed(2) + ' RP';
            }
        }

        async function postear() {
            const txt = document.getElementById('msg');
            const { data: { user } } = await _supabase.auth.getUser();
            if(!user) return openAuth('login');
            const { error } = await _supabase.from('comentarios').insert([{ contenido: txt.value, usuario: user.email.split('@')[0] }]);
            if(!error) { txt.value = ""; cargarMuro(); }
        }

        async function cargarMuro() {
            const { data } = await _supabase.from('comentarios').select('*').order('created_at', { ascending: false }).limit(5);
            if(data) {
                document.getElementById('muro-pro').innerHTML = data.map(c => `
                    <div class="border-b border-white/5 pb-6 animate__animated animate__fadeIn">
                        <p class="text-gray-400 text-xs italic">"${c.contenido}"</p>
                        <span class="text-[9px] text-blue-600 font-black uppercase mt-3 block tracking-widest">@${c.usuario}</span>
                    </div>
                `).join('');
            }
        }

        function comprar(fase) {
            alert("Redirigiendo a pasarela segura de Stripe para Fase " + fase);
        }

        checkUser();
        cargarMuro();
    </script>
</body>
</html>
